### **事件查看页面设计**

#### **页面路径**

```
/events
```

------

### **页面功能**

- 显示 Kubernetes 集群中的事件（Events）。
- 按照时间顺序展示事件日志，包括告警、调度、Pod 状态变更等。
- 支持过滤、排序（如按命名空间、类型等）。

------

### **页面字段**

| 字段名称                | 描述                                     |
|---------------------|----------------------------------------|
| 时间 (time)           | 事件发生的时间。                               |
| 类型 (type)           | 事件类型（如 `Warning` 或 `Normal`）。          |
| 级别 (reason)         | 事件级别（如 `FailedScheduling`, `Created`）。 |
| 消息 (message)        | 事件的详细描述。                               |
| 对象 (involvedObject) | 与事件相关的 Kubernetes 对象（如 Pod、Node 等）。    |
| 命名空间 (namespace)    | 事件所属的命名空间。                             |
| 源 (source)          | 事件的来源（如 `kubelet`, `scheduler` 等）。     |

------

### **页面布局**

#### **1. 事件列表**

```less
+------------------------------------------------------------------------------------------------------------+
| 时间               | 类型       | 级别                | 消息                     | 命名空间     | 对象        |
+--------------------+------------+---------------------+--------------------------+------------+------------+
| 2024-12-12 10:00  | Warning    | FailedScheduling    | No nodes available       | default     | pod/app-1  |
| 2024-12-12 10:01  | Normal     | Created             | Pod created successfully | default     | pod/app-1  |
| 2024-12-12 10:02  | Warning    | NodeNotReady        | Node node-1 is not ready | kube-system | node/node-1|
+------------------------------------------------------------------------------------------------------------+
```

#### **2. 过滤功能**

- 过滤条件：
    - **命名空间**：通过下拉框选择查看特定命名空间的事件。
    - **类型**：选择查看 `Warning` 或 `Normal` 类型的事件。
    - **时间范围**：按时间范围过滤（如最近 1 小时、24 小时等）。

#### **3. 详细事件信息（弹窗）**

- 点击某一事件行，弹出一个窗口展示事件的详细信息。

```less
+---------------------------+
| 详细事件信息              |
+---------------------------+
| 时间: 2024-12-12 10:00   |
| 类型: Warning            |
| 级别: FailedScheduling   |
| 消息: No nodes available |
| 命名空间: default         |
| 对象: pod/app-1          |
| 来源: scheduler          |
+---------------------------+
```

------

### **API 设计**

#### **获取事件列表**

- **方法**: `GET /api/events`

- **请求参数**:

    - `namespace` (可选): 过滤特定命名空间的事件。
    - `type` (可选): 按事件类型过滤（如 `Warning`, `Normal`）。
    - `startTime` (可选): 按时间范围过滤的开始时间。
    - `endTime` (可选): 按时间范围过滤的结束时间。
    - `limit` (可选): 返回事件的最大数量。
    - `continue` (可选): 分页标记。

- **响应**:

  ```json
  {
    "events": [
      {
        "time": "2024-12-12T10:00:00Z",
        "type": "Warning",
        "reason": "FailedScheduling",
        "message": "No nodes available",
        "namespace": "default",
        "involvedObject": {
          "kind": "Pod",
          "name": "app-1"
        },
        "source": "scheduler"
      },
      {
        "time": "2024-12-12T10:01:00Z",
        "type": "Normal",
        "reason": "Created",
        "message": "Pod created successfully",
        "namespace": "default",
        "involvedObject": {
          "kind": "Pod",
          "name": "app-1"
        },
        "source": "kubelet"
      }
    ],
    "continue": "next-page-token"
  }
  ```

#### **错误响应**

- 示例:

  ```json
  {
    "error": "Failed to fetch events",
    "details": "Kubernetes API returned an error"
  }
  ```

------

### **前端逻辑设计**

1. **数据展示**:
    - 表格展示事件列表。
    - 支持分页、排序、过滤功能。
    - 点击某一事件时，弹出详细信息窗口。
2. **实时刷新**:
    - 默认每 5 秒（或自定义）刷新事件列表。
3. **分页支持**:
    - 如果返回了 `continue` 标记，前端需将其保存在分页状态，点击下一页时请求下一页数据。
4. **过滤功能**:
    - 当用户选择命名空间或类型时，触发 API 请求重新获取数据。

------

### **页面交互流程**

1. 用户进入 `/events` 页面。
2. 默认加载所有事件列表。
3. 用户可选择命名空间、类型等过滤条件。
4. 点击某一事件，展示弹窗查看详情。
5. 支持分页查看更多事件。